{% extends 'apartments/base.html' %}

{% block title %}Agent Suggestions{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6">Agent Suggestions</h1>
    
    {% if suggestions %}
        {% for suggestion in suggestions %}
            <div class="border rounded-lg p-4 mb-4">
                <h3 class="font-semibold">{{ suggestion.home.name }}</h3>
                <p class="text-gray-600">Suggested by: {{ suggestion.agent.get_full_name|default:suggestion.agent.username }}</p>
                {% if suggestion.message %}
                    <p class="mt-2">{{ suggestion.message }}</p>
                {% endif %}
                <div class="mt-4">
                    <form method="post" action="{% url 'homes:approve_suggestion' suggestion.pk %}" class="inline">
                        {% csrf_token %}
                        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                            Approve
                        </button>
                    </form>
                    <form method="post" action="{% url 'homes:reject_suggestion' suggestion.pk %}" class="inline ml-2">
                        {% csrf_token %}
                        <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                            Reject
                        </button>
                    </form>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="text-gray-600">No pending suggestions.</p>
    {% endif %}
</div>
{% endblock %}

