{% extends 'apartments/base.html' %}

{% block title %}Agent Dashboard{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6">Agent Dashboard</h1>
    
    <div class="mb-6">
        <a href="{% url 'homes:generate_invite_code' %}" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark">
            Generate Invite Code
        </a>
        <a href="{% url 'homes:suggest_home' %}" class="ml-4 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">
            Suggest Home
        </a>
    </div>
    
    <h2 class="text-2xl font-semibold mb-4">Your Clients ({{ client_count }})</h2>
    
    {% if clients_data %}
        {% for client_data in clients_data %}
            <div class="border rounded-lg p-4 mb-4">
                <h3 class="font-semibold">{{ client_data.client.get_full_name|default:client_data.client.username }}</h3>
                <p class="text-gray-600">Homes: {{ client_data.home_count }} | Pending Suggestions: {{ client_data.pending_suggestions }}</p>
            </div>
        {% endfor %}
    {% else %}
        <p class="text-gray-600">No clients linked yet. Generate an invite code to get started.</p>
    {% endif %}
</div>
{% endblock %}

