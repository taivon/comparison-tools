{% extends 'apartments/base.html' %}

{% block title %}Sign Up - Apartment Comparison Tool{% endblock %}

{% block extra_head %}
<meta name="robots" content="noindex, nofollow">
{% endblock %}

{% block content %}
<div class="min-h-screen bg-white">
    {% if not user.is_authenticated %}
    <!-- Hero Section (only show for non-authenticated users) -->
    <div class="text-center py-12">
        <div class="w-16 h-16 bg-brand-purple rounded-xl flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
            </svg>
        </div>
        <h1 class="text-4xl font-bold text-gray-900 mb-4">Start Comparing Apartments Smarter</h1>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">Our rent concession calculator calculates your net effective rent, helping you compare apartments with move-in specials, free months, and discounts. Get started free or upgrade for unlimited comparisons and advanced features.</p>
    </div>

    <!-- Sign Up Section -->
    <div class="max-w-md mx-auto px-4 pb-12">
        <div class="bg-white py-8 px-6 shadow-lg rounded-lg border border-gray-100">
            {% if messages %}
                {% for message in messages %}
                    <div class="mb-6 p-4 rounded-lg {% if message.tags == 'error' %}bg-red-50 border border-red-200{% else %}bg-green-50 border border-green-200{% endif %}">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                {% if message.tags == 'error' %}
                                <svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                </svg>
                                {% else %}
                                <svg class="h-5 w-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                </svg>
                                {% endif %}
                            </div>
                            <div class="ml-3">
                                <p class="text-sm {% if message.tags == 'error' %}text-red-800{% else %}text-green-800{% endif %}">{{ message }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}

            <!-- Google OAuth Button -->
            <a href="{% url 'social:begin' 'google-oauth2' %}{% if next %}?next={{ next|urlencode }}{% endif %}"
               class="w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-purple transition-colors font-medium text-gray-700">
                <svg class="w-5 h-5 mr-3" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Continue with Google
            </a>

            <p class="text-center text-sm text-gray-500 mt-6">
                Your account will be created automatically when you sign in.
            </p>
        </div>

        <p class="text-center text-sm text-gray-600 mt-6">
            Already have an account?
            <a href="{% url 'login' %}{% if next %}?next={{ next|urlencode }}{% endif %}" class="font-medium text-brand-purple hover:text-brand-purple-light">Sign in</a>
        </p>

        <p class="text-center text-xs text-gray-500 mt-4">
            By signing up, you agree to our
            <a href="{% url 'privacy' %}" class="text-brand-purple hover:text-brand-purple-light">Privacy Policy</a>
            and
            <a href="{% url 'terms' %}" class="text-brand-purple hover:text-brand-purple-light">Terms of Service</a>
        </p>
    </div>
    {% else %}
    <!-- Header for authenticated users -->
    <div class="text-center py-12">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">Upgrade to Pro</h1>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">Choose the plan that works best for you</p>
    </div>
    {% endif %}

    <!-- Pricing Cards -->
    <div class="max-w-7xl mx-auto px-4 py-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Choose Your Plan</h2>

        <!-- Free Plan Card -->
        <div class="max-w-3xl mx-auto mb-8 bg-gray-50 rounded-xl p-6 border border-gray-200">
            <div class="flex items-center justify-between">
                <div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Free Plan</h3>
                    <p class="text-gray-600">Try our apartment comparison tool at no cost</p>
                </div>
                <div class="text-3xl font-bold text-gray-900">$0</div>
            </div>
            <ul class="mt-4 space-y-2">
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-brand-purple mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span class="text-gray-700">Compare up to 2 apartments</span>
                </li>
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-brand-purple mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span class="text-gray-700">Basic comparison features</span>
                </li>
            </ul>
        </div>

        {% if stripe_enabled %}
        <!-- Premium Plans -->
        <div class="grid md:grid-cols-2 {% if lifetime_price %}lg:grid-cols-3{% endif %} gap-8 {% if lifetime_price %}lg:gap-6{% endif %} max-w-6xl mx-auto">
            <!-- Monthly Plan -->
            <div class="bg-white rounded-2xl shadow-lg border-2 border-gray-200 p-8 {% if lifetime_price %}lg:pt-12{% endif %} hover:border-brand-purple transition-all relative">
                <div class="mb-6">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Monthly</h3>
                    <div class="flex items-baseline mb-4">
                        <span class="text-5xl font-bold text-gray-900">${{ monthly_price|floatformat:2 }}</span>
                        <span class="text-gray-500 ml-2">/{{ monthly_interval }}</span>
                    </div>
                    <p class="text-gray-600">Perfect for flexible monthly needs</p>
                </div>

                <ul class="space-y-3 mb-8">
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>Up to 20</strong> apartment comparisons</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>5 favorite places</strong> for distance tracking</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>Google Maps</strong> address autocomplete</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>Driving distance</strong> calculations</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>12 scoring factors</strong> to rank apartments</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700">Ad-free experience</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700">Shape our roadmap</span>
                    </li>
                </ul>

                {% if user.is_authenticated %}
                    <button onclick="createCheckoutSession('monthly')" class="block w-full bg-brand-purple hover:bg-brand-purple-dark text-white px-6 py-3 rounded-lg font-semibold text-center transition-colors">
                        Subscribe Monthly
                    </button>
                {% else %}
                    <a href="{% url 'social:begin' 'google-oauth2' %}{% if next %}?next={{ next|urlencode }}{% endif %}"
                       class="block w-full bg-brand-purple hover:bg-brand-purple-dark text-white px-6 py-3 rounded-lg font-semibold text-center transition-colors">
                        Sign Up for Monthly
                    </a>
                {% endif %}
            </div>

            <!-- Annual Plan -->
            <div class="bg-white rounded-2xl shadow-lg border-2 border-brand-purple p-8 {% if lifetime_price %}lg:pt-12{% endif %} relative hover:shadow-xl transition-all">
                <!-- Best Value Badge -->
                <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 z-10">
                    <span class="bg-brand-green text-white px-4 py-1 rounded-full text-sm font-semibold whitespace-nowrap">
                        Best Value - Save 17%
                    </span>
                </div>

                <div class="mb-6 mt-4">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Annual</h3>
                    <div class="flex items-baseline mb-4">
                        <span class="text-5xl font-bold text-gray-900">${{ annual_price|floatformat:2 }}</span>
                        <span class="text-gray-500 ml-2">/{{ annual_interval }}</span>
                    </div>
                    <p class="text-gray-600">Best value for long-term planning</p>
                </div>

                <ul class="space-y-3 mb-8">
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>Everything</strong> in Monthly plan</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>Save ${{ annual_savings|floatformat:2 }}</strong> per year</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700">One convenient payment</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700">Cancel anytime</span>
                    </li>
                </ul>

                {% if user.is_authenticated %}
                    <button onclick="createCheckoutSession('annual')" class="block w-full bg-brand-purple hover:bg-brand-purple-dark text-white px-6 py-3 rounded-lg font-semibold text-center transition-colors">
                        Subscribe Annual
                    </button>
                {% else %}
                    <a href="{% url 'social:begin' 'google-oauth2' %}{% if next %}?next={{ next|urlencode }}{% endif %}"
                       class="block w-full bg-brand-purple hover:bg-brand-purple-dark text-white px-6 py-3 rounded-lg font-semibold text-center transition-colors">
                        Sign Up for Annual
                    </a>
                {% endif %}
            </div>

            {% if lifetime_price %}
            <!-- Lifetime Plan -->
            <div class="bg-white rounded-2xl shadow-lg border-2 border-gray-200 p-8 lg:pt-12 relative hover:border-brand-purple transition-all md:col-span-2 lg:col-span-1">
                <!-- Lifetime Badge -->
                <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 z-10">
                    <span class="bg-gray-800 !text-white px-4 py-1 rounded-full text-sm font-semibold whitespace-nowrap">
                        Pay Once, Own Forever
                    </span>
                </div>

                <div class="mb-6 mt-4">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Lifetime</h3>
                    <div class="flex items-baseline mb-4">
                        <span class="text-5xl font-bold text-gray-900">${{ lifetime_price|floatformat:2 }}</span>
                        <span class="text-gray-500 ml-2">one-time</span>
                    </div>
                    <p class="text-gray-600">Permanent access, no recurring fees</p>
                </div>

                <ul class="space-y-3 mb-8">
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>Everything</strong> in Annual plan</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700"><strong>Never pay again</strong></span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700">All future updates included</span>
                    </li>
                    <li class="flex items-start">
                        <svg class="w-5 h-5 text-brand-green mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <span class="text-gray-700">Support the development</span>
                    </li>
                </ul>

                {% if user.is_authenticated %}
                    <button onclick="createCheckoutSession('lifetime')" class="block w-full bg-gray-800 hover:bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold text-center transition-colors">
                        Buy Lifetime Access
                    </button>
                {% else %}
                    <a href="{% url 'social:begin' 'google-oauth2' %}{% if next %}?next={{ next|urlencode }}{% endif %}"
                       class="block w-full bg-gray-800 hover:bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold text-center transition-colors">
                        Sign Up for Lifetime
                    </a>
                {% endif %}
            </div>
            {% endif %}
        </div>
        {% endif %}
    </div>

    <!-- Features Comparison -->
    <div class="max-w-5xl mx-auto px-4 py-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-2 text-center">Compare Plans</h2>
        <p class="text-gray-600 text-center mb-8">See what's included in each plan</p>

        <div class="bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden">
            <!-- Table Header -->
            <div class="grid grid-cols-3 bg-gray-50 border-b border-gray-200">
                <div class="px-6 py-4">
                    <span class="text-sm font-semibold text-gray-900">Feature</span>
                </div>
                <div class="px-6 py-4 text-center border-l border-gray-200">
                    <span class="text-sm font-semibold text-gray-600">Free</span>
                    <p class="text-xs text-gray-500 mt-1">$0 forever</p>
                </div>
                <div class="px-6 py-4 text-center border-l border-gray-200 bg-brand-purple/5">
                    <span class="text-sm font-semibold text-brand-purple">Pro</span>
                    <p class="text-xs text-gray-500 mt-1">Starting at ${{ monthly_price|floatformat:2 }}/mo</p>
                </div>
            </div>

            <!-- Core Features Section -->
            <div class="border-b border-gray-100">
                <div class="px-6 py-3 bg-gray-50/50">
                    <span class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Core Features</span>
                </div>

                <!-- Apartment Comparisons -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Apartment comparisons</span>
                        <p class="text-xs text-gray-500 mt-1">Side-by-side comparison table</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 !text-gray-700 dark:bg-gray-800 dark:!text-white">Up to 2</span>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-brand-green/10 !text-brand-green dark:bg-brand-green/20 dark:!text-brand-green">Up to 20</span>
                    </div>
                </div>

                <!-- Net Effective Rent Calculator -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Net effective rent calculator</span>
                        <p class="text-xs text-gray-500 mt-1">Calculate true costs with concessions</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>

                <!-- Rent Concession Breakdown -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Rent concession breakdown</span>
                        <p class="text-xs text-gray-500 mt-1">See savings from move-in specials</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>

                <!-- Comparison Score -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Comparison score</span>
                        <p class="text-xs text-gray-500 mt-1">Weighted scoring to rank apartments</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Scoring & Preferences Section -->
            <div class="border-b border-gray-100">
                <div class="px-6 py-3 bg-gray-50/50">
                    <span class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Scoring & Preferences</span>
                </div>

                <!-- Basic Scoring Weights -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Basic scoring weights</span>
                        <p class="text-xs text-gray-500 mt-1">Price/sqft, square footage, distance</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-800 !text-white">3 factors</span>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-800 !text-white">3 factors</span>
                    </div>
                </div>

                <!-- Advanced Scoring Weights -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Advanced scoring weights</span>
                        <p class="text-xs text-gray-500 mt-1">Net rent, total cost, bedrooms, bathrooms, discount, parking, utilities, view, balcony</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-brand-green/10 !text-brand-green dark:bg-brand-green/20 dark:!text-brand-green">9 factors</span>
                    </div>
                </div>

                <!-- Reorder Scoring Factors -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Reorder scoring factors</span>
                        <p class="text-xs text-gray-500 mt-1">Drag and drop to prioritize what matters</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Location Features Section -->
            <div class="border-b border-gray-100">
                <div class="px-6 py-3 bg-gray-50/50">
                    <span class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Location Features</span>
                </div>

                <!-- Favorite Places -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Favorite places</span>
                        <p class="text-xs text-gray-500 mt-1">Save locations like work, gym, etc.</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 !text-gray-700 dark:bg-gray-800 dark:!text-white">1 place</span>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-brand-green/10 !text-brand-green dark:bg-brand-green/20 dark:!text-brand-green">5 places</span>
                    </div>
                </div>

                <!-- Google Maps Autocomplete -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Address autocomplete</span>
                        <p class="text-xs text-gray-500 mt-1">Google Maps powered suggestions</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>

                <!-- Driving Distance -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Driving distance calculations</span>
                        <p class="text-xs text-gray-500 mt-1">Real commute times via Google Maps</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Experience Section -->
            <div>
                <div class="px-6 py-3 bg-gray-50/50">
                    <span class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Experience</span>
                </div>

                <!-- Ad-free -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Ad-free experience</span>
                        <p class="text-xs text-gray-500 mt-1">No advertisements or distractions</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>

                <!-- Priority Support -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Priority support</span>
                        <p class="text-xs text-gray-500 mt-1">Get help faster when you need it</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>

                <!-- Early Access -->
                <div class="grid grid-cols-3 border-b border-gray-100 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Early access to new features</span>
                        <p class="text-xs text-gray-500 mt-1">Be the first to try new tools</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>

                <!-- Roadmap Influence -->
                <div class="grid grid-cols-3 hover:bg-gray-50/50 transition-colors">
                    <div class="px-6 py-4">
                        <span class="text-sm text-gray-900 font-medium">Shape our roadmap</span>
                        <p class="text-xs text-gray-500 mt-1">Vote on features and influence what we build next</p>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100">
                        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    <div class="px-6 py-4 flex items-center justify-center border-l border-gray-100 bg-brand-purple/5">
                        <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="max-w-4xl mx-auto px-4 py-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">Frequently Asked Questions</h2>
        <div class="space-y-6">
            <div>
                <h3 class="font-semibold text-gray-900 mb-2">How does the free plan work?</h3>
                <p class="text-gray-700">You can compare up to 2 apartments with basic features. Upgrade to Pro for unlimited comparisons and advanced tools.</p>
            </div>
            <div>
                <h3 class="font-semibold text-gray-900 mb-2">Can I cancel anytime?</h3>
                <p class="text-gray-700">Yes, you can cancel your Pro subscription at any time. You'll retain access until the end of your billing period.</p>
            </div>
            <div>
                <h3 class="font-semibold text-gray-900 mb-2">How do I subscribe to Pro?</h3>
                <p class="text-gray-700">After signing up, you can choose either a monthly or annual subscription. Payment is processed securely through Stripe.</p>
            </div>
            <div>
                <h3 class="font-semibold text-gray-900 mb-2">Is my data safe?</h3>
                <p class="text-gray-700">Yes, we use industry-standard security practices to keep your data safe and private.</p>
            </div>
        </div>
    </div>
</div>

<!-- Stripe.js (only load for authenticated users) -->
{% if user.is_authenticated %}
<script src="https://js.stripe.com/v3/"></script>
<script>
    const stripe = Stripe('{{ stripe_publishable_key }}');

    async function createCheckoutSession(planType) {
        try {
            const response = await fetch('{% url "apartments:create_checkout_session" %}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': getCookie('csrftoken'),
                },
                body: JSON.stringify({ plan_type: planType }),
            });

            const data = await response.json();

            if (data.error) {
                alert('Error: ' + data.error);
                return;
            }

            // Redirect to Stripe Checkout
            const result = await stripe.redirectToCheckout({
                sessionId: data.sessionId,
            });

            if (result.error) {
                alert('Error: ' + result.error.message);
            }
        } catch (error) {
            console.error('Error:', error);
            alert('An error occurred. Please try again.');
        }
    }

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
</script>
{% endif %}
{% endblock %}